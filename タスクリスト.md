# タスクリスト

## プロジェクト: 社員情報管理Blazorアプリ

---

## フェーズ1: プロジェクトセットアップ

### 1.1 プロジェクト作成
- [x] Blazor WebAssemblyプロジェクトの作成
  ```bash
  dotnet new blazorwasm -o BlazorReport
  ```
- [x] プロジェクト構成の確認
- [x] 不要なサンプルファイルの削除
- [x] ソリューションファイル作成、プロジェクト追加
  ```bash
  dotnet new sln -n BlazorReport
  dotnet sln BlazorReport.sln add BlazorReport/BlazorReport.csproj
  ```
- 結果
  ```bash
  $ tree BlazorReport -I 'bin|obj' -L 3
  BlazorReport
  |-- App.razor
  |-- BlazorReport.csproj
  |-- Layout
  |   |-- MainLayout.razor
  |   |-- MainLayout.razor.css
  |   |-- NavMenu.razor
  |   `-- NavMenu.razor.css
  |-- Pages
  |   `-- Home.razor
  |-- Program.cs
  |-- Properties
  |   `-- launchSettings.json
  |-- _Imports.razor
  `-- wwwroot
      |-- css
      |   |-- app.css
      |   `-- bootstrap
      |-- favicon.png
      |-- icon-192.png
      `-- index.html

  7 directories, 14 files
  ```

### 1.2 NuGetパッケージのインストール
- [x] BootstrapBlazorのインストール
  ```bash
  dotnet add package BootstrapBlazor
  ```
- [x] ClosedXMLのインストール（Excel生成用）
  ```bash
  dotnet add package ClosedXML
  ```
- [x] System.Text.Json（既存の場合は確認のみ）
  ```bash
  dotnet add package System.Text.Json
  ```

### 1.3 JavaScriptライブラリの追加
- [x] jsPDFのCDN参照を`index.html`に追加
- [x] jsPDF-AutoTableのCDN参照を`index.html`に追加

---

## フェーズ2: 基盤実装

### 2.1 データモデル作成
- [x] `Models`フォルダの作成
- [x] `Employee.cs`クラスの作成
  - 社員番号
  - 氏名
  - 所属
  - 役職
  - 入社年月日

### 2.2 データサービス作成
- [x] `Services`フォルダの作成
- [x] `EmployeeService.cs`の作成
  - JSONファイル読み込み機能
  - データ取得メソッド
- [x] `Program.cs`にサービス登録

### 2.3 静的ファイルの配置
- [x] `wwwroot/data`フォルダの作成
- [x] `SampleData.json`を`wwwroot/data`にコピー

---

## フェーズ3: UI実装

### 3.1 BootstrapBlazorの設定
- [x] `Program.cs`にBootstrapBlazorサービス追加
- [x] `App.razor`の設定
- [x] `_Imports.razor`にusing追加
- [x] 必要なCSSとJSの参照追加

### 3.2 メイン画面の作成
- [x] `Pages/Index.razor`の編集
- [x] タイトルとヘッダーの作成
- [x] BootstrapBlazor Tableコンポーネントの配置
- [x] データバインディング設定
- [x] テーブルの列定義（社員番号、氏名、所属、役職、入社年月日）

### 3.3 エクスポートボタンの追加
- [x] Excelエクスポートボタンの配置
- [x] PDFエクスポートボタンの配置
- [x] ボタンのスタイリング

---

## フェーズ4: エクスポート機能実装

### 4.1 Excelエクスポートサービス
- [x] `Services/ExcelExportService.cs`の作成
- [x] ClosedXMLを使用したExcel生成メソッド
  - ワークブックとワークシートの作成
  - ヘッダー行の作成
  - データ行の追加
  - セルのスタイリング（フォント、背景色、罫線等）
  - 列幅の自動調整
- [x] サービスの登録

### 4.2 PDFエクスポート機能（JavaScript連携）
- [x] `wwwroot/js/pdfExport.js`の作成
- [x] jsPDF + jsPDF-AutoTableを使用したPDF生成関数
  - テーブル定義（ヘッダーとデータ）
  - スタイリング設定
  - 日本語フォント対応の設定
- [x] Blazorコンポーネントから呼び出すメソッドの実装

### 4.3 ダウンロード機能の実装
- [x] Excelダウンロード用JSInterop処理
  - `wwwroot/js/fileDownload.js`の作成
  - バイト配列からBlobを生成してダウンロード
- [x] PDFダウンロード処理（jsPDF内蔵のsave機能を利用）
- [x] Blazorコンポーネントからのダウンロード呼び出し実装

---

## フェーズ5: テストとデバッグ

### 5.1 機能テスト
- [x] データ表示の確認
  - 全5件のデータが正しく表示されるか
  - テーブルのソート機能が動作するか
- [x] Excelエクスポートの確認
  - ファイルが正しくダウンロードされるか
  - データが正確にエクスポートされるか
  - Excelで開けるか
- [x] PDFエクスポートの確認
  - ファイルが正しくダウンロードされるか
  - データが正確にエクスポートされるか
  - PDFビューアで開けるか

### 5.2 ブラウザ互換性テスト
- [x] Chrome（主要ターゲット）

---

## フェーズ6: 仕上げ

### 6.1 コードのクリーンアップ
- [x] 未使用のusingディレクティブの削除
- [x] コードコメントの追加
- [x] コードフォーマットの統一

### 6.2 ドキュメント作成
- [x] README.mdの作成
  - プロジェクト概要
  - 実行方法
  - ビルド方法
- [x] 使用方法の説明

### 6.3 ビルドとデプロイ準備
- [x] Releaseビルドの確認
  ```bash
  dotnet build -c Release
  ```
- [x] 公開用ファイルの生成
  ```bash
  dotnet publish -c Release
  ```

### 6.4 GitHub Pages設定
- [ ] GitHubリポジトリの作成
- [ ] `.gitignore`ファイルの作成（.NET用）
- [ ] Blazor WebAssemblyのベースパス設定
  - `index.html`の`<base href="/" />`を`<base href="/リポジトリ名/" />`に変更
- [ ] 404.htmlの作成（SPA用リダイレクト対応）

### 6.5 GitHub Actions設定
- [ ] `.github/workflows`フォルダの作成
- [ ] `deploy.yml`ワークフローファイルの作成
  - .NET SDKのセットアップ
  - 依存関係のリストア
  - Blazor WebAssemblyのビルド
  - GitHub Pagesへの公開設定
- [ ] GitHub Pagesの設定確認
  - Settings > Pages > Source を「GitHub Actions」に設定

### 6.6 デプロイテスト
- [ ] 初回デプロイの実行
  ```bash
  git add .
  git commit -m "Initial commit"
  git push origin main
  ```
- [ ] GitHub Actionsワークフローの実行確認
- [ ] デプロイされたサイトの動作確認
  - データ表示の確認
  - Excelエクスポート機能の確認
  - PDFエクスポート機能の確認

---

## オプション（今後の拡張）

- [ ] データの追加・編集・削除機能
- [ ] CSVエクスポート機能
- [ ] 印刷機能
- [ ] データの検索・フィルタ機能の強化
- [ ] ページネーション機能
- [ ] データのバリデーション
- [ ] エラーハンドリングの強化

---

## 進捗管理

| フェーズ | 完了率 | ステータス |
|---------|--------|-----------|
| フェーズ1: プロジェクトセットアップ | 0% | 未着手 |
| フェーズ2: 基盤実装 | 0% | 未着手 |
| フェーズ3: UI実装 | 0% | 未着手 |
| フェーズ4: エクスポート機能実装 | 0% | 未着手 |
| フェーズ5: テストとデバッグ | 0% | 未着手 |
| フェーズ6: 仕上げ＋デプロイ | 0% | 未着手 |

**全体進捗: 0%**

---

## デプロイ情報

- **デプロイ先**: GitHub Pages
- **CI/CD**: GitHub Actions
- **URL**: `https://<username>.github.io/<repository-name>/`
- **自動デプロイ**: mainブランチへのpush時に自動実行
